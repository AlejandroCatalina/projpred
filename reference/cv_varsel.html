<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cross-validate the variable selection (varsel) — cv_varsel • projpred</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Cross-validate the variable selection (varsel) — cv_varsel" />

<meta property="og:description" content="Perform cross-validation for the projective variable selection for a generalized
linear model." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">projpred</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.8.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="http://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="http://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://mc-stan.org">Stan</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/projpred/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="http://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Cross-validate the variable selection (varsel)</h1>
    
    </div>

    
    <p>Perform cross-validation for the projective variable selection for a generalized
linear model.</p>
    

    <pre class="usage"><span class='fu'>cv_varsel</span>(<span class='no'>fit</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>cv_method</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ns</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>nc</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>nspred</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ncpred</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>nv_max</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>penalty</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='no'>T</span>, <span class='kw'>nloo</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>K</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>k_fold</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>lambda_min_ratio</span> <span class='kw'>=</span> <span class='fl'>1e-05</span>, <span class='kw'>nlambda</span> <span class='kw'>=</span> <span class='fl'>500</span>, <span class='kw'>regul</span> <span class='kw'>=</span> <span class='fl'>1e-06</span>,
  <span class='kw'>validate_search</span> <span class='kw'>=</span> <span class='no'>T</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>fit</th>
      <td><p>Same as in <a href='varsel.html'>varsel</a>.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Same as in <a href='varsel.html'>varsel</a>.</p></td>
    </tr>
    <tr>
      <th>cv_method</th>
      <td><p>The cross-validation method, either 'LOO' or 'kfold'. Default is 'LOO'.</p></td>
    </tr>
    <tr>
      <th>ns</th>
      <td><p>Number of samples used for selection. Ignored if nc is provided or if method='L1'.</p></td>
    </tr>
    <tr>
      <th>nc</th>
      <td><p>Number of clusters used for selection. Default is 1 and ignored if method='L1' 
(L1-search uses always one cluster).</p></td>
    </tr>
    <tr>
      <th>nspred</th>
      <td><p>Number of samples used for prediction (after selection). Ignored if ncpred is given.</p></td>
    </tr>
    <tr>
      <th>ncpred</th>
      <td><p>Number of clusters used for prediction (after selection). Default is 5.</p></td>
    </tr>
    <tr>
      <th>nv_max</th>
      <td><p>Same as in <a href='varsel.html'>varsel</a>.</p></td>
    </tr>
    <tr>
      <th>intercept</th>
      <td><p>Same as in <a href='varsel.html'>varsel</a>.</p></td>
    </tr>
    <tr>
      <th>penalty</th>
      <td><p>Same as in <a href='varsel.html'>varsel</a>.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Whether to print out some information during the validation, Default is TRUE.</p></td>
    </tr>
    <tr>
      <th>nloo</th>
      <td><p>Number of observations used to compute the LOO validation (anything between 1 and the 
total number of observations). Smaller values lead to
faster computation but higher uncertainty (larger errorbars) in the accuracy estimation.
Default value is 100. Only applicable if <code>cv_method = LOO</code>.</p></td>
    </tr>
    <tr>
      <th>K</th>
      <td><p>Number of folds in the k-fold cross validation. Only applicable
if <code>cv_method = TRUE</code> and <code>k_fold = NULL</code>.</p></td>
    </tr>
    <tr>
      <th>k_fold</th>
      <td><p>An array with cross-validated stanfits and the respective
test datasets returned by kfold with <code>save_fits=TRUE</code>.
If not provided, kfold is called inside the function.</p></td>
    </tr>
    <tr>
      <th>lambda_min_ratio</th>
      <td><p>Same as in <a href='varsel.html'>varsel</a>.</p></td>
    </tr>
    <tr>
      <th>nlambda</th>
      <td><p>Same as in <a href='varsel.html'>varsel</a>.</p></td>
    </tr>
    <tr>
      <th>regul</th>
      <td><p>Amount of regularization in the projection. Usually there is no need for 
regularization, but sometimes for some models the projection can be ill-behaved and we
need to add some regularization to avoid numerical problems. Default is 1e-9.</p></td>
    </tr>
    <tr>
      <th>validate_search</th>
      <td><p>Whether to cross-validate also the selection process, that is, whether to perform
selection separately for each fold. Default is TRUE and we strongly recommend not setting this
to FALSE, because this is known to bias the accuracy estimates for the selected submodels.
However, setting this to FALSE can sometimes be useful because comparing the results to the case
where this parameter is TRUE gives idea how strongly the feature selection is (over)fitted to the
data (the difference corresponds to the search degrees of freedom or the effective number 
of parameters introduced by the selectin process).</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>Random seed used in the subsampling LOO. By default uses a fixed seed.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Currently ignored.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The original stanreg object augmented with an element 'varsel',
which is a list containing the following elements:</p><dl class='dl-horizontal'>
 <dt><code>vind</code></dt><dd><p>The order in which the variables were added to the submodel.</p></dd>
 <dt><code>pctch</code></dt><dd><p>Percentage of cross-validation runs that included the given
   variable to a model of given size.</p></dd>
 <dt><code>kl</code></dt><dd><p>KL-divergence for each submodel size.</p></dd>
 <dt><code>summaries</code></dt><dd><p>CV-summary statistics computed during the selection.</p></dd>
 <dt><code>d_test</code></dt><dd><p>The data used to evaluate the summaries.</p></dd>
 <dt><code>family_kl</code></dt><dd><p>A modified <code>family</code>-object.</p></dd>
</dl>

    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>### Usage with stanreg objects</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>stan_glm</span>(<span class='no'>y</span>~<span class='no'>x</span>, <span class='fu'>binomial</span>())</div><div class='output co'>#&gt; <span class='warning'>Warning: Omitting the 'data' argument is not recommended and may not be allowed in future versions of rstanarm. Some post-estimation functions (in particular 'update', 'loo', 'kfold') are not guaranteed to work properly unless 'data' is specified as a data frame.</span></div><div class='output co'>#&gt; <span class='error'>Error in eval(predvars, data, env): object 'y' not found</span></div><div class='input'><span class='no'>fit_cv</span> <span class='kw'>&lt;-</span> <span class='fu'>cv_varsel</span>(<span class='no'>fit</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Some Pareto k diagnostic values are slightly high. See help('pareto-k-diagnostic') for details.</span></div><div class='output co'>#&gt; [1] "Computing LOOs..."
#&gt;   |                                                                              |=                                                                     |   1%  |                                                                              |=                                                                     |   2%  |                                                                              |==                                                                    |   3%  |                                                                              |===                                                                   |   4%  |                                                                              |====                                                                  |   5%  |                                                                              |====                                                                  |   6%  |                                                                              |=====                                                                 |   7%  |                                                                              |======                                                                |   8%  |                                                                              |======                                                                |   9%  |                                                                              |=======                                                               |  10%  |                                                                              |========                                                              |  11%  |                                                                              |========                                                              |  12%  |                                                                              |=========                                                             |  13%  |                                                                              |==========                                                            |  14%  |                                                                              |==========                                                            |  15%  |                                                                              |===========                                                           |  16%  |                                                                              |============                                                          |  17%  |                                                                              |=============                                                         |  18%  |                                                                              |=============                                                         |  19%  |                                                                              |==============                                                        |  20%  |                                                                              |===============                                                       |  21%  |                                                                              |===============                                                       |  22%  |                                                                              |================                                                      |  23%  |                                                                              |=================                                                     |  24%  |                                                                              |==================                                                    |  25%  |                                                                              |==================                                                    |  26%  |                                                                              |===================                                                   |  27%  |                                                                              |====================                                                  |  28%  |                                                                              |====================                                                  |  29%  |                                                                              |=====================                                                 |  30%  |                                                                              |======================                                                |  31%  |                                                                              |======================                                                |  32%  |                                                                              |=======================                                               |  33%  |                                                                              |========================                                              |  34%  |                                                                              |========================                                              |  35%  |                                                                              |=========================                                             |  36%  |                                                                              |==========================                                            |  37%  |                                                                              |===========================                                           |  38%  |                                                                              |===========================                                           |  39%  |                                                                              |============================                                          |  40%  |                                                                              |=============================                                         |  41%  |                                                                              |=============================                                         |  42%  |                                                                              |==============================                                        |  43%  |                                                                              |===============================                                       |  44%  |                                                                              |================================                                      |  45%  |                                                                              |================================                                      |  46%  |                                                                              |=================================                                     |  47%  |                                                                              |==================================                                    |  48%  |                                                                              |==================================                                    |  49%  |                                                                              |===================================                                   |  50%  |                                                                              |====================================                                  |  51%  |                                                                              |====================================                                  |  52%  |                                                                              |=====================================                                 |  53%  |                                                                              |======================================                                |  54%  |                                                                              |======================================                                |  55%  |                                                                              |=======================================                               |  56%  |                                                                              |========================================                              |  57%  |                                                                              |=========================================                             |  58%  |                                                                              |=========================================                             |  59%  |                                                                              |==========================================                            |  60%  |                                                                              |===========================================                           |  61%  |                                                                              |===========================================                           |  62%  |                                                                              |============================================                          |  63%  |                                                                              |=============================================                         |  64%  |                                                                              |==============================================                        |  65%  |                                                                              |==============================================                        |  66%  |                                                                              |===============================================                       |  67%  |                                                                              |================================================                      |  68%  |                                                                              |================================================                      |  69%  |                                                                              |=================================================                     |  70%  |                                                                              |==================================================                    |  71%  |                                                                              |==================================================                    |  72%  |                                                                              |===================================================                   |  73%  |                                                                              |====================================================                  |  74%  |                                                                              |====================================================                  |  75%  |                                                                              |=====================================================                 |  76%  |                                                                              |======================================================                |  77%  |                                                                              |=======================================================               |  78%  |                                                                              |=======================================================               |  79%  |                                                                              |========================================================              |  80%  |                                                                              |=========================================================             |  81%  |                                                                              |=========================================================             |  82%  |                                                                              |==========================================================            |  83%  |                                                                              |===========================================================           |  84%  |                                                                              |============================================================          |  85%  |                                                                              |============================================================          |  86%  |                                                                              |=============================================================         |  87%  |                                                                              |==============================================================        |  88%  |                                                                              |==============================================================        |  89%  |                                                                              |===============================================================       |  90%  |                                                                              |================================================================      |  91%  |                                                                              |================================================================      |  92%  |                                                                              |=================================================================     |  93%  |                                                                              |==================================================================    |  94%  |                                                                              |==================================================================    |  95%  |                                                                              |===================================================================   |  96%  |                                                                              |====================================================================  |  97%  |                                                                              |===================================================================== |  98%  |                                                                              |===================================================================== |  99%  |                                                                              |======================================================================| 100%
#&gt; [1] "Performing the selection using all the data.."
#&gt; [1] "Done."</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Markus Paasiniemi, Juho Piironen, Aki Vehtari.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

